{"version":3,"sources":["main.js"],"names":["console","log","showMessagesOnDom","messages","messagesUl","document","querySelector","innerHTML","children","length","removeChild","forEach","message","newMessage","createElement","newTime","innerText","moment","format","text","appendChild","sendMessage","field","value","axios","post","then","response","data","catch","error","addEventListener","window","setInterval","onload","get"],"mappings":";;AAAAA,QAAQC,GAAR;;AAIA;AACA;AACA;;;AAGA,IAAIC,oBAAoB,SAApBA,iBAAoB,CAASC,QAAT,EAAkB;AACtCH,YAAQC,GAAR,CAAY,YAAZ,EAA0BE,QAA1B;;AAEA,QAAIC,aAAaC,SAASC,aAAT,eAAjB;AACAF,eAAWG,SAAX,GAAuB,EAAvB;;AAEA,WAAMH,WAAWI,QAAX,CAAoBC,MAA1B,EAAiC;AAC7BL,mBAAWM,WAAX,CAAuBN,WAAWI,QAAX,CAAoB,CAApB,CAAvB;AACH;;AAEDL,aAASQ,OAAT,CAAiB,UAASC,OAAT,EAAiB;AAC9B,YAAIC,aAAaR,SAASS,aAAT,MAAjB;AACA,YAAIC,UAAUV,SAASS,aAAT,CAAuB,GAAvB,CAAd;AACAC,gBAAQC,SAAR,GAAoBC,SAASC,MAAT,CAAgB,mBAAhB,CAApB;AACAL,mBAAWG,SAAX,GAAuBJ,QAAQO,IAA/B;AACAN,mBAAWO,WAAX,CAAuBL,OAAvB;AACAX,mBAAWgB,WAAX,CAAuBP,UAAvB;AACH,KAPD;AAQH,CAlBD;;AAsBA,IAAIQ,cAAc,SAAdA,WAAc,GAAU;AACxB,QAAIC,QAAQjB,SAASC,aAAT,6BAAZ;AACA,QAAIgB,MAAMC,KAAV,EAAgB;AACZvB,gBAAQC,GAAR,mBAA8BqB,MAAMC,KAApC;;AAEAC,cACKC,IADL,CACU,+BADV,EAC2C;AACnCN,kBAAMG,MAAMC;AADuB,SAD3C,EAIKG,IAJL,CAIU,UAASC,QAAT,EAAkB;AACpB3B,oBAAQC,GAAR;AACA;AACAqB,kBAAMC,KAAN,GAAc,EAAd;AACAvB,oBAAQC,GAAR,CAAY,kBAAZ,EAAgC0B,QAAhC;AACAzB,8BAAkByB,SAASC,IAA3B;AACH,SAVL,EAWKC,KAXL,CAWW,UAASC,KAAT,EAAe;AAClB9B,oBAAQC,GAAR;AACH,SAbL;AAcH;AACJ,CApBD;AAqBAI,SAASC,aAAT,CAAuB,aAAvB,EAAsCyB,gBAAtC,CAAuD,OAAvD,EAAgEV,WAAhE;;AAEAW,OAAOC,WAAP,CAAmB,YAAU;AACzBjC,YAAQC,GAAR,CAAY,gCAAZ;AACA+B,WAAOE,MAAP,GAAgB,YAAU;AACtBV,cACKW,GADL,CACS,+BADT,EACyC,EADzC,EAGKT,IAHL,CAGU,UAAUC,QAAV,EAAoB;AACtB3B,oBAAQC,GAAR,CAAY,iCAAZ,EAA+C0B,SAASC,IAAxD;AACD,SALP,EAMOC,KANP,CAMa,UAAUC,KAAV,EAAiB;AACtB9B,oBAAQC,GAAR,CAAY,2BAAZ;AACD,SARP;AASK,KAVT;AAWH,CAbD,EAaG,KAAG,IAbN","file":"main.js","sourcesContent":["console.log(`Hello World from app.js! \nChange this message, and make sure it changes in the browser \nto verify that you're working in the right files.`)\n\n//user types, presses send, message appears\n//user types, presses send, get message from field, send message to server, message appears\n//user types, presses send, get message from field, send message to server, message appears\n\n\nlet showMessagesOnDom = function(messages){\n    console.log('messages: ', messages)\n\n    let messagesUl = document.querySelector(`ul.messages`);\n    messagesUl.innerHTML = '';\n\n    while(messagesUl.children.length){\n        messagesUl.removeChild(messagesUl.children[0])\n    }\n\n    messages.forEach(function(message){\n        let newMessage = document.createElement(`li`);\n        let newTime = document.createElement('p');\n        newTime.innerText = moment().format('MMM Do, h:mm:ss a');\n        newMessage.innerText = message.text;\n        newMessage.appendChild(newTime);\n        messagesUl.appendChild(newMessage);\n    })\n}\n\n\n\nlet sendMessage = function(){\n    let field = document.querySelector(`input[name=\"new-message\"]`);\n    if (field.value){\n        console.log(`send to server`, field.value);\n\n        axios\n            .post('http://localhost:1337/message', {\n                text: field.value\n            })\n            .then(function(response){\n                console.log(`your message went through`)\n                //we put it in here so it (emptying the field) only happens upon successful submission\n                field.value = '';\n                console.log(\"server responded\", response)\n                showMessagesOnDom(response.data)\n            })\n            .catch(function(error){\n                console.log(`there was a problem sending your message`)\n            })\n    }\n}\ndocument.querySelector('button.send').addEventListener(\"click\", sendMessage);\n\nwindow.setInterval(function(){\n    console.log(\"page gets checked for new msgs\");\n    window.onload = function(){\n        axios\n            .get('http://localhost:1337/message',{\n            })\n            .then(function (response) {\n                console.log('response data from get function', response.data);\n              })\n              .catch(function (error) {\n                console.log('error with your axios get');\n              });\n            }\n}, 60*1000);"]}